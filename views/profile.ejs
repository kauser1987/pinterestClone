<% include ./partials/header.ejs %>
<div class="profile w-full min-h-screen bg-zinc-700 pt-1">
    <form id="uploadform" action="/fileUpload" hidden method="post" enctype="multipart/form-data">
        <input type="file" name="image" id="">
    </form>
    <div class="profdets text-white mt-10 flex flex-col  items-center">
        <div class="relative">
            <div id="uploadicon" class="cursor-pointer absolute bottom-2 right-2 px-2 py-1 border-1 bg-zinc-800 rounded-full">
                <i class="ri-pencil-fill"></i></div>
            <div class="w-32 h-32 bg-zinc-100 rounded-full overflow-hidden">
                <img class="w-full h-full object-cover"   src="/images/uploads/<%= user.profileImage %>" alt="">
                        </div>
        </div>
        <h1 class="text-2xl text-white font-semibold"><%= user.fullname%></h1>
        <h3 class="text-xs  font-semibold">@ <%= user.username%></h3>
        <a class="px-5 py-1 bg-zinc-700 text-xs font-semibold rounded-full " href="/edit">Edit profile</a>
        <a class="text-xs font-semibold px-5 py-1 mt-5 bg-red-600 rounded-full" href="/add">Add New Post</a>
    </div>
    <div class="cards flex flex-wrap px-4 mt-10 gap-5 text-white">
    <div class="card">
        <div class="w-32 h-20 bg-zinc-100 rounded-md overflow-hidden">
            <img class="w-full h-full object-cover" src="/images/uploads/<%= user?.posts[0]?.postImage%>" alt="">
        </div>
    <a href="/show/posts" class="font-semibold text-xl pt-3 opacity-50">All Pins</a>
        <h5 class="font-semibold text-xs opacity-50"><%= user.posts.length%> Pins</h5>
    </div>

    </div>
</div>

<script>
    document.querySelector("#uploadicon").addEventListener("click",()=>{
        document.querySelector("#uploadform input").click();
    })
    document.querySelector("#uploadform input").addEventListener("change",()=>{
        document.querySelector("#uploadform").submit();
    })
</script>

<% include ./partials/footer.ejs %>